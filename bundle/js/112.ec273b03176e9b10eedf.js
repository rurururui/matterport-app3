/*! For license information please see 112.ec273b03176e9b10eedf.js.LICENSE.txt */
"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[112],{70497:(e,t,i)=>{var s;i.d(t,{X:()=>s}),function(e){e[e.Min=0]="Min",e[e.Standard=1]="Standard",e[e.High=2]="High",e[e.Detail=3]="Detail"}(s||(s={}))},32484:(e,t,i)=>{i.d(t,{yJ:()=>r});var s=i(80112),o=i(47299),n=i(14971);const r={TEXTURE_SETTINGS:o.Ay,TILEDMESH_SETTINGS:s.W,clearRaycastHits:n.Jn}},80112:(e,t,i)=>{i.d(t,{W:()=>r});var s=i(64491),o=i(75778),n=i(70497);const r={urlTemplateToken:"<file>",initialMaxLOD:n.X.Min,nonMeshMaxLOD:n.X.Standard,maxLOD:n.X.High,minLOD:n.X.Min,loadSiblings:!0,displayActiveTiles:!1,autoDisableRendererCulling:!0,optimizeRaycast:!1,stopAtEmptyTiles:!1,disableTileUpdates:!1,disposeModel:!1,limitMemoryUsage:(0,s.Fr)(),allocatedMegsBeforeLimitingLod:350,lruMinExtraTiles:(0,s.Fr)()?0:100,lruMaxTiles:800,lruUnloadPercent:.05,downloadQueueConcurrency:8,parseQueueConcurrency:10,snappingMaxLOD:n.X.Standard,errorTarget:Number((0,o.P3)("errorTarget",(0,s.Fr)()?6:4)),errorMultiplierHiddenFloors:.01,errorMultiplierRaycastOcclusion:.1,smallMeshThreshold:Number((0,o.P3)("smallMeshThreshold",40)),smallMeshErrorMultiplier:Number((0,o.P3)("smallMeshErrorMultiplier",.1))}},83075:(e,t,i)=>{i.d(t,{PO:()=>o,m2:()=>n});var s=i(99276);const o=e=>!!e&&e instanceof s.B,n={hasMeshGroup:e=>"object"==typeof e&&!!e&&"meshGroup"in e,hasMeshSubgroup:e=>"object"==typeof e&&!!e&&"meshSubgroup"in e,isRoomMesh:o,isVisibleRoomMesh:e=>o(e)&&e.raycastEnabled&&e.visible}},14971:(e,t,i)=>{i.d(t,{Jn:()=>l,rt:()=>c});var s=i(68909);const o=i(47299).Ay.sightingMaxAge,n=new s.Color;let r,a=-1;const c=(e,t,i)=>{r||(r=new s.InstancedMesh(new s.SphereGeometry(.005,8,4),new s.MeshBasicMaterial,o),r.frustumCulled=!1,h(r));const c=new s.Matrix4;return({point:s,distance:l})=>{const h=l/i.fovDistanceScale();c.makeScale(h,h,h).setPosition(s),r.setMatrixAt(++a%o,c),r.instanceMatrix.needsUpdate=!0;for(let t=o;t--;)r.setColorAt((a-t+o)%o,n.setHex(e).multiplyScalar(1-t/o));r.instanceColor&&(r.instanceColor.needsUpdate=!0),r.parent||t.scene.add(r)}},l=()=>{var e;r&&(null===(e=r.parent)||void 0===e||e.remove(r),h(r))};function h(e){const t=(new s.Matrix4).makeScale(0,0,0);for(let i=0;i<o;i++)e.setMatrixAt(i,t)}new s.Vector4(1,0,0,1),new s.Vector4(0,1,0,1),new s.Vector4(0,0,1,1),new s.Vector4(1,1,0,1),new s.Vector4(1,0,1,1),new s.Vector4(1,1,1,1),new s.Vector4(0,1,1,1),new s.Vector4(0,0,0,1)},52026:(e,t,i)=>{i.d(t,{I9:()=>c,jT:()=>a,vM:()=>r});var s=i(78229),o=i(96659),n=i(65882);const r={count:0};const a=e=>{const{sweepData:t,direction:i,viewDirection:a,sourceSweep:c,ignoreSweeps:l,directionFactor:u,additionalFilter:b,meshQuery:y,scorers:m=[],filters:x=[]}=e;if(!t.currentSweepObject)return[];const v=i.clone().normalize(),w=a?a.clone().normalize():void 0,M=c||t.currentSweepObject;x.push(s.AU(M),s.Ol(),d(M,n.U.maxDistSameFloor*n.U.maxDistSameFloor,n.U.maxDistOtherFloors*n.U.maxDistOtherFloors),s.Zx());for(const e of l)x.push(s.AU(e));return y&&!M.neighborsEdited||x.push(s.xg(M)),w?x.push(p(M,v,w,null!=u?u:n.U.directionFactor,n.U.viewDirectionFactor)):x.push(s.jW(M.position,v,u)),b&&x.push(b),y&&!M.neighborsEdited&&x.push(f(M,y)),w&&m.push(o.VY(M.position,w,n.U.viewDirectionWeight)),m.push(o.oW(M.position,v,n.U.directionWeight),o.Io(M.position),g(M),h(M.sourceViewId)),r.count=0,t.sortByScore(x,m)},c=(e,t,i,a,c=[],d=[])=>{d.push(s.Ol(),s.Zx()),c.push(o.Io(i.point));const p=e.currentSweepObject;t&&p?(d.push(s.AU(p),s.lp(p.position,n.U.longerTransitionMaxDist),s.xg(p)),c.push(l(e),h(p.sourceViewId))):d.push(s.lp(i.point,n.U.longerTransitionMaxDist)),i.face&&d.push(s.DJ(i.point,i.face.normal));const f=a.floorIdFromObject(i.object);f&&d.push(s.Eo(f));const g=a.mdsRoomIdFromObject(i.object);g&&d.push(u(g)),r.count=0;const b=e.sortByScore(d,c);if(0===b.length){const t=e.getClosestSweep(i.point,!0);b.push({sweep:t,score:0})}return b},l=e=>{function t(t){return e.containsSweep(t.id)?5:-5}return Object.defineProperty(t,"name",{value:"_preferUnfiltered"}),t},h=e=>{function t(t){return e===t.sourceViewId?1:-1}return Object.defineProperty(t,"name",{value:"_bySameView"}),t},d=(e,t,i)=>{function s(s){return e.position.distanceToSquared(s.position)<=(e.floorId===s.floorId?t:i)}return Object.defineProperty(s,"name",{value:"_maxDistPerFloor"}),s},u=e=>{function t(t){return e===t.roomId}return Object.defineProperty(t,"name",{value:"_bySameRoom"}),t},p=(e,t,i,o,n)=>{const r=s.jW(e.position,t,o);Object.defineProperty(r,"name",{value:"_filterByDir"});const a=s.Zz.some(s.Zz.every(r,s.lp(e.position,5)),s.jW(e.position,i,n));Object.defineProperty(a,"name",{value:"_filterByDirOrViewDir"});return t.dot(i)<.25?r:a},f=(e,t)=>{function i(i){return r.count++,!t.isSegmentOccluded(e.position,i.position)}return Object.defineProperty(i,"name",{value:"_notRaycastNeighbors"}),i},g=e=>{function t(t){return s.xg(e)(t)?1:-1}return Object.defineProperty(t,"name",{value:"_visionNeighbors"}),t}},52947:(e,t,i)=>{i.d(t,{Ay:()=>n,F7:()=>a,cF:()=>r});var s=i(68909);class o{constructor(e,t){this.raycast=(()=>{const e=new s.Vector3,t=new s.Box3;return(i,s,n,c)=>{const l=t.copy(this.bounds).expandByScalar(s);if(i.ray.intersectsBox(l))for(const t of this.children)if(t instanceof o)t.raycast(i,s,n,c);else if(t instanceof r){if(!1===(null==c?void 0:c(t)))continue;const o=e,r=i.ray.distanceSqToSegment(t.start,t.end,void 0,e),a=Math.sqrt(r);a<s&&n.push({distance:i.ray.origin.distanceTo(o),object:t,distanceToRay:a,point:o.clone(),isLineOctreeIntersection:!0})}else if(t instanceof a){if(!1===(null==c?void 0:c(t)))continue;const e=i.ray.distanceToPoint(t);e<s&&n.push({distance:i.ray.origin.distanceTo(t),object:t,distanceToRay:e,point:t.clone(),isLineOctreeIntersection:!0})}}})(),this.level=t,this.bounds=e.clone(),this.clear()}clear(){this.childNodes=[],this.children=[]}add(e){let t=!1;const i=e instanceof s.Line3?[e.start,e.end]:[e];if(this.level<4){0===this.childNodes.length&&this.buildChildNodes();for(const s of this.childNodes)i.every((e=>s.bounds.containsPoint(e)))&&(t=!0,s.add(e))}t||this.children.push(e)}remove(e){const t=e instanceof s.Line3?[e.start,e.end]:[e];for(let i=0;i<this.children.length;i++){const s=this.children[i];if(s instanceof o){if(t.every((e=>s.bounds.containsPoint(e)))&&s.remove(e))return!0}else if(s===e)return this.children.splice(i,1),!0}return!1}buildChildNodes(){const e=this.bounds.max.clone().sub(this.bounds.min).clone().multiplyScalar(.5);for(let t=0;t<2;t++)for(let i=0;i<2;i++)for(let n=0;n<2;n++){const r=this.bounds.min.x+e.x*n,a=r+e.x,c=this.bounds.min.y+e.y*t,l=c+e.y,h=this.bounds.min.z+e.z*i,d=h+e.z,u=new s.Box3(new s.Vector3(r,c,h),new s.Vector3(a,l,d)),p=new o(u,this.level+1);this.childNodes.push(p),this.children.push(p)}}spherecast(e,t){if(e.intersectsBox(this.bounds))for(const i of this.children)if(i instanceof o)i.spherecast(e,t);else if(i instanceof r){const o=i.closestPointToPoint(e.center,!0,new s.Vector3);o.distanceTo(e.center)<e.radius&&t.push(new a(o))}else i instanceof s.Vector3&&i.distanceTo(e.center)<e.radius&&t.push(i)}traverse(e){for(const t of this.children)t instanceof o?t.traverse(e):e(t)}}class n{constructor(e){this.pointCount=0,this.lineCount=0,this.root=new o(e,0)}add(e){e instanceof s.Line3?this.lineCount++:e instanceof s.Vector3&&this.pointCount++,this.root.add(e)}remove(e){e instanceof r?this.lineCount--:e instanceof a&&this.pointCount--,this.root.remove(e)}clear(){this.root.clear(),this.pointCount=0,this.lineCount=0}traverse(e){this.root.traverse(e)}raycast(e,t,i){const s=[];return this.root.raycast(e,t,s,i),s}}class r extends s.Line3{constructor(e,t){super(e,t),this.start=e,this.end=t,this.isSnapLine3=!0}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}clone(){return new r(this.start,this.end)}}class a extends s.Vector3{constructor(e){super(),this.point=e,this.isSnapVector3=!0,super.copy(e)}copy(e){return this.point.copy(e.point),this}clone(){return new a(this.point)}}},23987:(e,t,i)=>{i.d(t,{Z:()=>s});const s=new class{constructor(e=!0){this.values=new Map,e&&this.show()}clear(){this.values.clear(),this.drawValues()}show(){if(this.debugDiv)return;this.debugDiv=document.createElement("div");const e=this.debugDiv.style;e.fontFamily="monospace",e.position="fixed",e.backgroundColor="#aa11aa",e.left="20px",e.top="20px",e.zIndex="999899",e.pointerEvents="none",e.touchAction="none",document.body.appendChild(this.debugDiv),this.drawValues()}hide(){this.debugDiv&&(document.body.removeChild(this.debugDiv),this.debugDiv=void 0)}logValue(e,t){this.values.set(e,t),this.drawValues()}logMaxValue(e,t){this.values.has(e)?t>this.values.get(e)&&this.logValue(e,t):this.logValue(e,t)}logVector2(e,t){this.logValue(e,`(${t.x}, ${t.y})`)}logVector3(e,t){this.logValue(e,`(${t.x}, ${t.y}, ${t.z})`)}logVector4(e,t){this.logValue(e,`(${t.x}, ${t.y}, ${t.z} ${t.w})`)}logPose(e,t){this.logVector3(e+"-pos",t.position),this.logVector4(e+"-rot",t.rotation),this.logValue(e+"-focalDist",t.focalDistance)}showPt(e){if(this.pointDiv)this.pointDiv.style.left=`${e.x}px`,this.pointDiv.style.top=`${e.y}px`;else{this.pointDiv=document.createElement("div");const t=this.pointDiv.style;t.position="fixed",t.width="8px",t.height="8px",t.backgroundColor="#aaffaa",t.left=e.x-4+"px",t.top=e.y-4+"px",t.zIndex="99999",t.pointerEvents="none",t.touchAction="none",document.body.appendChild(this.pointDiv)}}drawValues(){if(!this.debugDiv)return;let e="";for(const[t,i]of this.values.entries())e+=`${t}: ${i}<br>`;this.debugDiv.innerHTML=e}}},52514:(e,t,i)=>{i.d(t,{QM:()=>h,Il:()=>u,bF:()=>l});var s=i(68909),o=i(95183),n=i(19968),r=i(53172),a=i(3249),c=i(68062);var l;(0,o.Dw)({unicodeFontsURL:"https://static.matterport.com/webgl-vendors/unicode-font-resolver/1.0.1/"}),function(e){e.WORLD="world",e.NDC="ndc"}(l||(l={}));class h extends s.Object3D{constructor(e,t=l.WORLD){var i,n,r,a;super(),this.config=e,this.scaleType=t,this.unscaledWidth=0,this.unscaledHeight=0,this.labelTextMaterial=new s.MeshBasicMaterial,this.bindings=[];const c=this.config.background||this.config.backgroundAsCollider;if(c){this.config.backgroundOpacity=void 0!==this.config.backgroundOpacity?this.config.backgroundOpacity:1,this.config.backgroundOpacity=this.config.background?this.config.backgroundOpacity:0;const t=this.createQuadGeometry(),i=new s.MeshBasicMaterial({color:e.backgroundColor,transparent:!0,depthTest:this.config.backgroundOpacity>0&&!e.disableDepth,depthWrite:this.config.backgroundOpacity>0&&!e.disableDepth,opacity:this.config.backgroundOpacity,stencilRef:1,stencilFail:s.KeepStencilOp,stencilZFail:s.KeepStencilOp,stencilZPass:s.ReplaceStencilOp,stencilFunc:s.AlwaysStencilFunc,stencilWrite:!0});this.labelBackgroundMesh=new this.config.backgroundColliderType(t,i),this.labelBackgroundMesh.position.z=-.01,this.labelBackgroundMesh.name="Label Background",this.collider=this.labelBackgroundMesh,this.add(this.labelBackgroundMesh)}const h=this.labelTextMesh=new o.EY;h.material=this.labelTextMaterial,h.name="Label Text",h.text=e.text||"",h.renderOrder=10,h.font=`${null!==(i=e.assetBasePath)&&void 0!==i?i:""}${e.fontPath}`,h.lang=e.lang,h.fontSize=1,h.fontWeight=700,h.anchorX="50%",h.anchorY="50%",h.outlineWidth=e.outline?e.outlineWidth:0,h.maxWidth=e.wordWrapWidth,h.textAlign=e.align,h.depthOffset=e.depthOffset||0,c&&(h.raycast=()=>{}),h.addEventListener("synccomplete",(()=>{var e;const[t,i,s,o]=h.textRenderInfo.visibleBounds;let n=s-t,r=o-i;isFinite(n)&&isFinite(r)&&(c&&(n+=this.config.backgroundBorderWidth,r+=this.config.backgroundBorderHeight,this.labelBackgroundMesh.scale.set(n,r,1)),this.unscaledWidth=n,this.unscaledHeight=r,this.aspect=n/Math.max(r,.001),h.position.set("50%"===h.anchorX?(t+s)/-2:0,"50%"===h.anchorY?(i+o)/-2:0,0),null===(e=this._onGeomUpdate)||void 0===e||e.call(this))})),this.scaleFactor=null!==(n=e.scale)&&void 0!==n?n:1,this.opacity=null!==(r=e.opacity)&&void 0!==r?r:1,this.setColor(null!==(a=e.color)&&void 0!==a?a:new s.Color),this.add(h),h.sync(),this.name="Label Container"}dispose(){this.bindings.forEach((e=>e.cancel())),this.labelTextMesh.dispose()}onGeomUpdate(e){this._onGeomUpdate=e}get text(){return this.config.text}set text(e){this.config.text=e,this.labelTextMesh.text=e,this.labelTextMesh.sync()}get mesh(){return this.labelTextMesh}getUnscaledSize(){return{width:this.unscaledWidth,height:this.unscaledHeight}}get scaleFactor(){return this.config.scale}set scaleFactor(e){this.config.scale=e,this.scale.setScalar(e)}get opacity(){return void 0!==this.config.opacity?this.config.opacity:1}set opacity(e){if(e!==this.config.opacity){this.config.opacity=e;const t=e>0&&!this.config.disableDepth;if(this.config.background){const i=this.labelBackgroundMesh.material;i.opacity=Math.min(this.config.backgroundOpacity||1,e),i.depthWrite=e>.15,i.depthTest=t}const i=this.labelTextMaterial;i.opacity=e,i.depthTest=t,this.visible=e>0,this.labelBackgroundMesh.visible=this.visible}}setColor(e){this.labelTextMaterial.color.copy(e)}setRenderLayer(e){this.labelTextMesh.layers.mask=e.mask,this.labelBackgroundMesh&&(this.labelBackgroundMesh.layers.mask=e.mask)}setRenderOrder(e){this.renderOrder=e,this.labelTextMesh.renderOrder=e,this.labelBackgroundMesh&&(this.labelBackgroundMesh.renderOrder=e)}setPosition(e,t=e=>e){this.position.copy(t(e))}setOrientation(e,t=0){this.quaternion.copy(e),0!==t&&this.rotateZ(-t*r.fy)}scaleBillboard(e,t,i,s,o,r,h=d.SCALE_DEFAULT){if(0!==i.elements[15])this.scaleFactor=.2*h*s*(d.ORTHO_IDEAL_HEIGHT/o);else{const u=(0,n.jn)(this.position,e,t,i.asThreeMatrix4()),p=Math.abs(u.x);if(p<1){const t=(0,c.Nv)(i,e,this.position,o,h),n=((0,a.qE)(r,1,2.5)+s)*d.SCALE_ASPECT,u=1+d.SCALE_NDC-p*d.SCALE_NDC-n,f=Math.max(Math.min(1/t*u,3),.001);this.scaleType===l.NDC?this.scaleFactor=f:this.scaleFactor=Math.min(f*d.NDC_MULT,h*d.SCALE_WORLD)}else this.scaleFactor=.001}}createQuadGeometry(){const e=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),t=new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,-1]),i=new s.BufferGeometry;return i.setAttribute("position",new s.BufferAttribute(e,3)),i.setIndex([0,1,2,0,2,3]),i.setAttribute("normal",new s.BufferAttribute(t,3)),i}}const d={SCALE_DEFAULT:.1,SCALE_WORLD:4,SCALE_NDC:.5,SCALE_ASPECT:.035,DEPTH_WRITE_THRESHOD:.15,ORTHO_IDEAL_HEIGHT:1500,NDC_MULT:1.15};class u{constructor(e){this.currentTextConfig=u.defaultTextConfig,e?this.updateTextStyle(e):this.updateTextStyle(u.defaultTextConfig)}updateTextStyle(e){this.currentTextConfig=Object.assign(Object.assign({},this.currentTextConfig),e)}createLabel(e={text:""}){return new h(Object.assign(Object.assign({},this.currentTextConfig),e))}async preload(e={text:""}){const t=Object.assign(Object.assign({},this.currentTextConfig),e);return new Promise((e=>{var i;(0,o.PY)({font:`${null!==(i=t.assetBasePath)&&void 0!==i?i:""}${t.fontPath}`,characters:t.text},e)}))}static makeConfig(e){return Object.assign(Object.assign({},u.defaultTextConfig),e)}}u.defaultTextConfig={text:"",fontPath:"fonts/roboto-700.woff",align:"center",wordWrapWidth:void 0,color:new s.Color(0,0,0),backgroundColor:new s.Color(1,1,1),backgroundBorderWidth:.9,backgroundBorderHeight:.7,background:!0,backgroundAsCollider:!0,backgroundColliderType:s.Mesh,scale:1,outline:!1,outlineWidth:.06}}}]);